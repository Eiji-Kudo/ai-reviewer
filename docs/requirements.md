# Reviewer - 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
**Reviewer** - AI支援コードレビュー管理システム

### 1.2 目的
コードベースのレビュープロセスを効率化し、AIとの対話を通じてレビュー品質を向上させるWebアプリケーション

### 1.3 ターゲットユーザー
- 開発チームのコードレビュアー
- プロジェクトマネージャー
- 個人開発者

---

## 2. 機能要件

### 2.1 カンバンボード機能

#### 2.1.1 レビューステータス管理
| ステータス | 説明 |
|-----------|------|
| Pending | レビュー待ち |
| In Review | レビュー中 |
| Changes Requested | 修正依頼 |
| Approved | 承認済み |
| Merged | マージ完了 |

#### 2.1.2 カンバン操作
- ドラッグ&ドロップによるカード移動
- カードのフィルタリング（担当者、優先度、ラベル）
- カードの検索機能
- ソート機能（作成日、更新日、優先度）

#### 2.1.3 レビューカード情報
- タイトル
- 説明
- 担当レビュアー
- 作成者
- 優先度（High/Medium/Low）
- ラベル/タグ
- 作成日時・更新日時
- コメント数
- AI分析ステータス

---

### 2.2 コードレビューUI

#### 2.2.1 コード表示
- シンタックスハイライト
- 差分表示（Unified / Side-by-side）
- 行番号表示
- ファイルツリー表示
- 変更ファイル一覧

#### 2.2.2 コメント機能
- 行単位のインラインコメント
- スレッド形式の議論
- コメントの解決/未解決ステータス
- メンション機能
- Markdown対応

#### 2.2.3 レビュー操作
- Approve / Request Changes / Comment
- 一括承認機能
- レビューチェックリスト

---

### 2.3 AI支援機能

#### 2.3.1 AIレビュー分析
- コード品質の自動分析
- 潜在的なバグ・セキュリティリスクの検出
- コーディング規約違反の指摘
- パフォーマンス改善提案
- リファクタリング提案

#### 2.3.2 AIチャット機能
- コード選択範囲に対する質問
- 「このコードは何をしている？」などの説明依頼
- 「より良い書き方は？」などの改善提案依頼
- レビューコメントの文面生成支援
- コンテキストを保持した連続対話

#### 2.3.3 AI設定
- 使用するAIモデルの選択
- APIキーの設定
- 分析の厳格度レベル設定
- 自動分析のON/OFF

---

### 2.4 プロジェクト管理

#### 2.4.1 リポジトリ連携
- GitHub連携
- GitLab連携（将来対応）
- Bitbucket連携（将来対応）

#### 2.4.2 プロジェクト設定
- レビュールールの設定
- 必須レビュアー設定
- 自動割り当てルール
- 通知設定

---

### 2.5 ダッシュボード

#### 2.5.1 統計情報
- レビュー完了数の推移
- 平均レビュー時間
- レビュアー別の統計
- AI指摘事項の傾向分析

#### 2.5.2 アクティビティ
- 最近のレビュー活動
- 自分に割り当てられたレビュー
- メンションされたコメント

---

## 3. 画面構成

```
/                     → ダッシュボード
/board                → カンバンボード
/review/:id           → レビュー詳細
/review/:id/files     → ファイル一覧・差分表示
/review/:id/chat      → AIチャット
/settings             → 設定
/settings/ai          → AI設定
/settings/integrations → 連携設定
```

---

## 4. データモデル（概要）

```
Project
├── id
├── name
├── repositoryUrl
└── settings

Review
├── id
├── projectId
├── title
├── description
├── status (pending/in_review/changes_requested/approved/merged)
├── priority (high/medium/low)
├── author
├── reviewers[]
├── labels[]
├── createdAt
└── updatedAt

Comment
├── id
├── reviewId
├── filePath
├── lineNumber
├── content
├── author
├── resolved
├── parentId (for threads)
└── createdAt

AIAnalysis
├── id
├── reviewId
├── type (quality/security/performance/style)
├── severity (error/warning/info)
├── message
├── filePath
├── lineNumber
└── suggestion
```

---

## 5. 開発フェーズ

### Phase 1: MVP（最小実行可能製品）
- [ ] カンバンボード基本機能
- [ ] レビューカード作成・編集
- [ ] ドラッグ&ドロップ操作
- [ ] 基本的なコード表示

### Phase 2: コードレビュー機能
- [ ] 差分表示機能
- [ ] インラインコメント
- [ ] コメントスレッド

### Phase 3: AI連携
- [ ] AIチャット機能
- [ ] コード自動分析
- [ ] レビュー支援機能

### Phase 4: 外部連携
- [ ] GitHub連携
- [ ] 認証機能
- [ ] 通知機能

---

## 6. 優先順位

1. カンバンによるレビュー管理のしやすさ
2. コードが見やすいレビューUI
3. AIへの質問のしやすさ
4. 外部サービス連携

---

## 7. 将来の拡張案

- チーム機能
- レビューテンプレート
- 自動マージ機能
- CI/CD連携
- Slack/Discord通知
